<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZeroTouch Metrology ‚Äì Questionnaire</title>

  <style>
    :root {
      --primary: #0078d7;
      --glass-bg: rgba(255, 255, 255, 0.45);
      --glass-border: rgba(255, 255, 255, 0.22);
      --shadow: rgba(0,0,0,0.12);
      --font: "Inter", Arial, sans-serif;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --primary: #3ea8ff;
        --glass-bg: rgba(255,255,255,0.08);
        --glass-border: rgba(255,255,255,0.12);
        --shadow: rgba(255,255,255,0.08);
      }
      body {
        color: #e4e4e4;
      }
    }

    body {
      margin: 0;
      font-family: var(--font);
      background: linear-gradient(135deg, #e9f0f8, #bdd0e3);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
      animation: fadeIn 0.7s ease-out;
      overflow-x: hidden;
    }

    /* Fond anim√© lent et subtil */
    body::before{
      content:"";
      position: fixed;
      inset:0;
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.25), transparent 60%),
                  radial-gradient(circle at 80% 80%, rgba(255,255,255,0.20), transparent 60%);
      animation: drift 30s linear infinite;
      pointer-events:none;
      z-index:-1;
    }

    @keyframes drift {
      0% {transform: translate(0px,0px);}
      100% {transform: translate(30px,20px);}
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    @keyframes fadeUp {
      from {opacity:0; transform: translateY(20px);}
      to {opacity:1; transform: translateY(0);}
    }

    #logo {
      width: clamp(120px, 20vw, 200px);
      margin-bottom: 10px;
      animation: fadeUp .8s ease-out;
    }

    #titre {
      font-size: clamp(22px, 4vw, 32px);
      font-weight: 600;
      color: var(--primary);
      text-align:center;
      margin-bottom: 20px;
      animation: fadeUp .8s ease-out;
    }

    #container {
      width: 100%;
      max-width: 900px;
      height: 70vh;
      border-radius: 14px;
      overflow: hidden;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 28px var(--shadow);
      animation: fadeUp 1s ease-out;
      transition: opacity .5s;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    #instructions {
      margin-top: 15px;
      font-size: clamp(15px, 2.5vw, 19px);
      text-align:center;
      transition: opacity .5s;
      animation: fadeUp 1.1s ease-out;
      max-width: 900px;
    }

    /* Bouton Envoyer */
    #overlay {
      margin-top: 22px;
      background: var(--primary);
      color: white;
      padding: 16px 36px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      font-size: clamp(16px, 2.5vw, 20px);
      transition: .25s;
      animation: pulse 2.5s infinite ease-in-out;
      user-select:none;
    }

    #overlay:hover {
      transform: translateY(-2px);
    }

    #overlay:active {
      transform: scale(0.95);
    }

    @keyframes pulse {
      0%,100% {box-shadow: 0 0 0 1px rgba(0,120,215,0);}
      50% {box-shadow: 0 0 12px rgba(0,120,215,0.4);}
    }

    /* Page merci */
    #message {
      display:none;
      text-align:center;
      animation: fadeIn .8s ease-out;
      max-width: 900px;
    }

    #message img {
      width: clamp(110px, 18vw, 160px);
      margin-bottom: 15px;
    }

    #message h2 {
      color: var(--primary);
      font-weight:600;
      margin-bottom:10px;
    }

    #count {
      font-size:16px;
      opacity:0.8;
      margin-top:0;
    }

    /* Loader */
    .spinner {
      margin: 18px auto;
      width: 42px;
      height: 42px;
      border-radius:50%;
      border: 4px solid #ccc;
      border-top-color: var(--primary);
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {transform: rotate(360deg);}
    }

    /* Barre de progression */
    #progressbar {
      width:0%;
      height:6px;
      background: var(--primary);
      border-radius:50px;
      margin:18px auto;
      animation: fill 2s linear forwards;
    }

    @keyframes fill {
      from {width:0%;}
      to   {width:100%;}
    }

    @media(max-width: 600px){
      #container { height: 60vh; }
      #overlay { width:100%; }
    }
  </style>

</head>
<body>

  <img id="logo" src="logo-ztm.png" alt="ZeroTouch">

  <div id="titre">Questionnaire ZeroTouch Metrology</div>

  <div id="container">
    <iframe src="https://forms.office.com/e/qr6QNdau8F?origin=lprLink"></iframe>
  </div>

  <h2 id="instructions">
    Pour recevoir votre nuage 3D, connectez-vous √† notre compte LinkedIn et envoyez-nous un message priv√©.
  </h2>

  <div id="overlay">Envoyer</div>

  <div id="message">
    <img src="logo-ztm.png" alt="Logo">
    <h2 id="thanks">Merci d‚Äôavoir r√©pondu !</h2>
    <p id="dynamicGreeting"></p>
    <div class="spinner"></div>
    <div id="progressbar"></div>
    <p id="count">Redirection dans 2‚Ä¶</p>
  </div>

  <script>
    const overlay = document.getElementById("overlay");
    const container = document.getElementById("container");
    const instructions = document.getElementById("instructions");
    const message = document.getElementById("message");
    const count = document.getElementById("count");
    const dynamicGreeting = document.getElementById("dynamicGreeting");

    // Horaire dynamique
    const hour = new Date().getHours();
    if (hour < 12) dynamicGreeting.textContent = "Belle matin√©e √† vous ‚òÄÔ∏è";
    else if (hour < 18) dynamicGreeting.textContent = "Bonne journ√©e üëã";
    else if (hour < 23) dynamicGreeting.textContent = "Bonne soir√©e üåô";
    else dynamicGreeting.textContent = "Courage aux travailleurs nocturnes üëÄ";

    const pageEnterTime = Date.now();

    overlay.addEventListener("click", () => {

      // vibration mobile si disponible
      if (navigator.vibrate) navigator.vibrate(20);

      // Tracking simple en console
      const stay = Math.round((Date.now() - pageEnterTime) / 1000);
      console.log("User clicked after", stay, "seconds");

      // Animation fade-out
      container.style.opacity = 0;
      overlay.style.opacity = 0;
      instructions.style.opacity = 0;

      setTimeout(() => {
        container.style.display = "none";
        overlay.style.display = "none";
        instructions.style.display = "none";
        message.style.display = "block";
      }, 500);

      let countdown = 2;
      const timer = setInterval(()=>{
        countdown--;
        count.textContent = `Redirection dans ${countdown}‚Ä¶`;
        if(countdown<=0) clearInterval(timer);
      },1000);

      setTimeout(() => {
        try {
          window.location.href = "https://www.linkedin.com/company/zerotouchmetrology/";
        } catch(e){
          alert("Impossible d‚Äôouvrir LinkedIn. Si vous √™tes sur un r√©seau d‚Äôentreprise, r√©essayez depuis votre t√©l√©phone.");
        }
      }, 2000);
    });
  </script>

</body>
</html>
